# Structural Causal Models
## Definition
**Definition 1** (Structural causal model; Pearl, 2009). A structural causal model (SCM) is a 4-tuple $\mathcal{M}=\langle U,V,\mathcal{F},\mathbb{P}\rangle$ where
+ $U$ is a set of exogenous variables that are determined by factors outside the model.
+ $V = \lbrace V_1, \cdots , V_n\rbrace$ is a set of endogenous variables that are determined by factors in the model.
+ $\mathcal{F}$ is a set of functions $\lbrace f_1, \cdots , f_n\rbrace$ such that each $f_i$ is a mapping from  (the respective domains of) $U_i\cup Pa_i$ to $V_i,$ where $U_i\subseteq U$ is some subset of $U$ whose elements are related to the variation of $V_i,$ $Pa_i\subseteq V\backslash V_i$ includes the parents of $V_i$ in the underlying causal DAG, and entire set of $F$ forms a mapping from $U$ to $V.$ In other words, $f_i$ assigns a value to the corresponding $V_i\in V,\ v_i\gets f(u_i,pa_i).$
+ $\mathbb{P}$ is a probability measure defined over the domain of $U,$ which creates variation in the endogenous variables $V$.

Every SCM $\mathcal{M}$ defines a directed acyclic graph (DAG) $\mathcal{G}(\mathcal{M}) = (V,E)$ (denoted as $\mathcal{G}$ for simplicity). Node in $\mathcal{G}$ correspond to endogenous variables in $V,$ and directed edges $E$ emit from the set of parent nodes $Pa_i$ towards $V_i.$ This causal DAG specifies the causal mechanism according to which the data are generated.

**Remark.** In a fully specfied SCM, any counterfactual quantity can be immediately constructed explicitly by variables from the underlying causal mechanism. These quantities are taken as axiomatic primitves in the potential outcome framework.

**Definition 2** (Intervention). Interventions in structural causal models are carried out by removing individual functions in $F$ from the model and fixing their left-hand side variables at some constant value. Mathematically, such an action is denoted by the operator $\mathrm{do}(\cdot).$

**Analytical Example.** Consider the directed acyclic graphs representing structural causal models. 

<div align=center>
   <img src='https://github.com/JurrivhLeon/JurrivhLeon.github.io/raw/main/figs/causalDAG1.png' width='648.9'/>
</div>

The structural causal model $\mathcal{M}$ underlying in (a) can be formulated as
<p>
  $$\begin{align}
  Z &\gets f_Z(U_Z)\\
  X &\gets f_X(Z, U_X)\\
  Y &\gets f_Y(X,Z,U_Y).
  \end{align} \tag{1}$$
</p>

Naturally, we can explicitly write the counterfactual $Y_x$ as

$$Y_x \gets f_Y(x,Z,U_Y), \tag{2}$$

which would specify the value of $Y$ if $X$ had been $x$.

Now if we intervene on $X$ so that $X=x_0,$ then we can get another SCM $\mathcal{M}_{x_0}$ underlying in (b):
<p>
  $$\begin{align}
  Z &\gets f_Z(U_Z)\\
  X &\gets x_0\\
  Y &\gets f_Y(X,Z,U_Y).
  \end{align} \tag{3}$$
</p>

Furthermore, the post-intervention distribution of Y can also be denoted in counterfactual notation as

$$\mathbb{P}(Y\in A\ |\ \mathrm{do}(X=x_0)) = \mathbb{P}(Y_{x_0}\in A),$$

where $A$ is any measurable set in the domain of $Y.$

Given interventions $\mathrm{do}(X=x_0)$ (control) and $\mathrm{do}(X=x_1)$ (treatment), any difference between two probability distributions associated with $\mathcal{M}_ {x_0}$ and $\mathcal{M}_ {x_1}$ captures the variation of $Y$ resulted by the causal effect of $\Delta x = x_1-x_0.$

**Definition 3** (Observational identifiability) Let $Q(\mathcal{M})$ be any computable quantity of a model $\mathcal{M}$. Then $Q$ is identifiable from distribution $P(v)$ compatible with a causal DAG $\mathcal{G}$, if for any two (fully specified) model $\mathcal{M}_0$ and $\mathcal{M}_1$ that satisfy the assumptions of $\mathcal{G}$, we have

$$P_0(v) = P_1(v)\ \Rightarrow\ Q(\mathcal{M}_0)=Q(\mathcal{M}_1).$$

This definition states that for any two unobserved SCMs $\mathcal{M}_0$ and $\mathcal{M}_1$ with their induced distributions $P_0(v)$ and $P_1(v)$ coincided, then they provide the same answers to query $Q$. 

**Remark.** If $Q$ is identifiable, then it depends only on $P(v)$ and the assumptions in $\mathcal{G}$, and furthermore, can be uniquely expressed in terms of the observed distribution.

## Confounding Bias
**Notations.** Given a causal DAG $\mathcal{G}$ includes node $X$. We use $\mathcal{G}_ {\underline{X}}$ to denote the graph obtained by removing all edges emitted by node $X$ in $\mathcal{G}.$ We use $\mathcal{G}_ {\overline{X}}$ to denote the graph obtained by removing all edges pointed at node $X$ in $\mathcal{G}.$



